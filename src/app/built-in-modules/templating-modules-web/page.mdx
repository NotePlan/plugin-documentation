import Link from 'next/link'
import Callout from '@/components/Callout'

# Web Module

## Overview

The Web Module provides a suite of methods which provide access to web APIs such as advice, affirmation or weather.

## Methods

> namespace: `web`

The following are the methods available in the Web Module, and they can be used in any `Templating` template, no additional configuration.

---

### journalingQuestion() : string

> #### journalingQuestion() : string

> Returns a random journaling question as text from [JournalingPlace](https://journaling.place/)

---

### advice

> #### advice() : string
>
> Returns random advice

---

### affirmation

> #### affirmation() : string
>
> Returns random affirmation

---

### quote

> #### quote() : string
>
> Returns random quote

---

### service

> #### service(serviceOrUrl: string = '', key? : string = '') : string
>
> Returns service information from custom URL or entry from `Templating` <Link href="/configuration/templating-settings">Web Service Settings</Link>

- `serviceOrUrl?` - Value from Settings Web Services or Full API URL
- `key?` - Array of API result index, keys or formatting values (see example below)

**Example: Setting Service**
The following example will return API information for `developerQuote` setting from settings

```markdown
<%- await web.services('developerQuote') %>
```

ðŸ™† "I say looking on the bright side of life never killed anybody."

**Example: Custom API Endpoint**
The following example will retrieve value from defined API endpoint

```markdown
<%- await web.services('https://random-data-api.com/api/address/random_address',['street_address', '\n','secondary_address', '\n', 'city', ', ', 'state_abbr',' ','zip_code']) %>
```

API request returns following JSON data

```json
{
  "id": 9861,
  "uid": "fe3fe033-db73-474b-bb29-ae6ae7bf67ae",
  "city": "East Glenna",
  "street_name": "Houston Roads",
  "street_address": "34157 Purdy Island",
  "secondary_address": "Apt. 660",
  "building_number": "35118",
  "mail_box": "PO Box 2474",
  "community": "Summer Place",
  "zip_code": "07215-2642",
  "zip": "59694",
  "postcode": "14367",
  "time_zone": "America/Caracas",
  "street_suffix": "Viaduct",
  "city_suffix": "mouth",
  "city_prefix": "West",
  "state": "Alaska",
  "state_abbr": "PA",
  "country": "Poland",
  "country_code": "TK",
  "latitude": 38.36868710203052,
  "longitude": 137.08981449317662,
  "full_address": "96697 McGlynn Tunnel, Powlowskihaven, AL 38836-5753"
}
```

Second parameter will build result, using array of indexes, keys and formatting strings

- Use `street_address` key
- Add newline character
- Use `secondary_address` key
- Add newline character
- Use `city` key
- Add comma character
- Use `state_abbr` key
- Add space character
- Use `zip_code` key

```javascript
;[
  'street_address',
  '\n',
  'secondary_address',
  '\n',
  'city',
  ', ',
  'state_abbr',
  ' ',
  'zip_code',
]
```

And will produce something like

```text
34157 Purdy Island
Apt. 660
East Glenna, PA 07215-2642
```

Web request that returns array of results

```javascript
<%- await web.services('https://zenquotes.io/api/random',['[0].q', ', ', '[0].a']) %>
```

Returns an array of quotes

```json
[
  {
    "q": "A clever person turns great troubles into little ones, and little ones into none at all. ",
    "a": "Chinese Proverb",
    "h": "<blockquote>&ldquo;A clever person turns great troubles into little ones, and little ones into none at all. &rdquo; &mdash; <footer>Chinese Proverb</footer></blockquote>"
  }
]
```

And piece together using `key`

```javascript
;['[0].q', ', ', '--', '[0].a']
```

- Access first array element, grabbing `q` key
- Add comma character
- Add two dash characters
- Access first array element, grabbing `a` key

Will produce the following

```text
A clever person turns great troubles into little ones, and little ones into none at all.

-- Chinese Proverb
```

---

> #### verse() : string
>
> Returns random Bible verse

---

### weather

> #### weather(format? : string = '', units? : string = 'metric', latitude? : number = 0, longitude? : number = 0) : string | object
>
> Returns weather information using NotePlan's built-in OpenWeatherMap API integration. Uses the <Link href="/configuration/templating-settings">Web Service Settings</Link> from `Templating` Settings when no format is provided, or a custom `format` string.

<Callout
  type="info"
  description={`
For complete weather documentation, including all available placeholders, examples, and advanced usage with raw object access, see the <Link href="/built-in-modules/templating-modules-weather">Weather Module</Link> documentation.
  `}
/>

**Quick Examples:**

```markdown
<%# Default usage %>
<%- weather() %>

<%# Custom format %>
<%- weather(':emoji: :condition: - :temperature::temperatureUnit:') %>

<%# Specific location %>
<%- weather('', 'imperial', 40.7128, -74.0060) %>
```

---
